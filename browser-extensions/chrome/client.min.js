!function(){function a(){var a=r.pathname.split("/").pop();h(a,function(b){b&&b.sold&&d(a,b.sold),c(a)})}function b(){}function c(a){var b=document.createElement("button");b.onclick=function(){f(a),d(a)},b.innerText="Mark as sold",q.appendChild(b)}function d(a,b){if(n){var c=document.createElement("div");c.innerHTML="this item was marked sold "+b+" times.";var d=document.createElement("button");d.innerText="Undo",d.onclick=function(){g(a),e(a)},q.appendChild(c),q.appendChild(d)}}function e(a){n&&c(a)}function f(a){return data[a]=data[a]||{},data[a].sold=!0,i(a,data[a],callback)}function g(a,b){return data[a]=data[a]||{},data[a].sold=!1,i(a,data[a],b)}function h(a,b){j(p+"/"+a,{type:"GET"},b)}function i(a,b,c){j(p+"/"+a,{type:"GET",data:b},c)}function j(a,b,c){var d;if(window.ActiveXObject)try{d=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw e}else d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&c&&c(d.responseText)},d.open(b.type,a,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(k(b.data))}function k(a){var b="";return Object.keys(a).forEach(function(c){b+=c+"="+a[c]}),b}var l,m,n,o=document.body,p="//localhost:3000",q=document.createElement("div");q.setAttribute("style","color:red;position:fixed;top:3em;right:0;padding:3px;text-align:right;z-index:"+(-1>>>1)),o.appendChild(q);var r=document.getElementById("replylink");switch(/^\/search/.test(location.pathname)?l="multiple":r&&(l="single"),l){case"multiple":m=!0,b();break;case"single":n=!0,a()}}();